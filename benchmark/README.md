# PromptXY v2.0 æ€§èƒ½åŸºå‡†æµ‹è¯•

å…¨é¢çš„æ€§èƒ½åŸºå‡†æµ‹è¯•å¥—ä»¶ï¼Œç”¨äºè¯„ä¼° PromptXY v2.0 çš„å„ä¸ªç»„ä»¶æ€§èƒ½ã€‚

## ğŸ“‹ æµ‹è¯•èŒƒå›´

### åç«¯æ€§èƒ½æµ‹è¯•

- **ååé‡æµ‹è¯•**: å¹¶å‘è¯·æ±‚å¤„ç†èƒ½åŠ› (10/50/100/500 å¹¶å‘)
- **è§„åˆ™å¼•æ“åŸºå‡†**: å•æ¡/å¤šæ¡è§„åˆ™åº”ç”¨æ—¶é—´ï¼Œä¸åŒè§„åˆ™ç±»å‹æ€§èƒ½
- **æ•°æ®åº“åŸºå‡†**: å•æ¡/æ‰¹é‡å†™å…¥ï¼ŒæŸ¥è¯¢æ€§èƒ½ï¼Œå¹¶å‘å†™å…¥ç¨³å®šæ€§
- **SSE åŸºå‡†**: è¿æ¥å»ºç«‹æ—¶é—´ï¼Œå¹¶å‘è¿æ¥ä¸Šé™ï¼Œäº‹ä»¶æ¨é€å»¶è¿Ÿï¼Œæ–­çº¿é‡è¿

### å‰ç«¯æ€§èƒ½æµ‹è¯•

- **æ¸²æŸ“æ€§èƒ½**: ç»„ä»¶æŒ‚è½½ï¼Œåˆ—è¡¨æ¸²æŸ“ï¼Œç»„ä»¶æ›´æ–°ï¼Œæ‰¹é‡æ›´æ–°
- **è™šæ‹Ÿæ»šåŠ¨**: 1000/10000 é¡¹æ•°æ®æ¸²æŸ“ï¼Œæ»šåŠ¨æ€§èƒ½ï¼ŒåŠ¨æ€é«˜åº¦
- **çŠ¶æ€ç®¡ç†**: Zustand ç®€å•/æ‰¹é‡æ›´æ–°ï¼Œè®¢é˜…æ•ˆç‡ï¼Œå¤æ‚çŠ¶æ€æ›´æ–°
- **å†…å­˜ç®¡ç†**: ç»„ä»¶ç”Ÿå‘½å‘¨æœŸæ³„æ¼ï¼Œé•¿æ—¶é—´è¿è¡Œç¨³å®šæ€§ï¼Œå¤§æ•°æ®é›†å†…å­˜å ç”¨

### ç«¯åˆ°ç«¯æµ‹è¯•

- **å®Œæ•´è¯·æ±‚æµç¨‹**: ç½‘å…³ -> è§„åˆ™ -> æ•°æ®åº“ -> å“åº”
- **è§„åˆ™åº”ç”¨æ—¶é—´**: è§„åˆ™å¼•æ“å¤„ç†å»¶è¿Ÿ
- **UI æ›´æ–°æ—¶é—´**: SSE äº‹ä»¶åˆ° UI æ¸²æŸ“
- **å»¶è¿Ÿåˆ†å¸ƒ**: ç«¯åˆ°ç«¯å»¶è¿Ÿåˆ†å¸ƒåˆ†æ
- **é«˜å¹¶å‘æµ‹è¯•**: 50+ å¹¶å‘ç«¯åˆ°ç«¯æ€§èƒ½

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# è¿›å…¥åŸºå‡†æµ‹è¯•ç›®å½•
cd benchmark

# å®‰è£…ä¾èµ–
npm install
```

### 2. å¿«é€ŸéªŒè¯

```bash
# è¿è¡Œå¿«é€Ÿæµ‹è¯•éªŒè¯æ¡†æ¶
npx tsx quick-test.ts
```

### 3. è¿è¡Œå®Œæ•´æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run benchmark

# å¿«é€Ÿæ¨¡å¼ (å‡å°‘è¿­ä»£æ¬¡æ•°)
npm run benchmark:quick

# åªè¿è¡Œåç«¯æµ‹è¯•
npm run benchmark:backend

# åªè¿è¡Œå‰ç«¯æµ‹è¯•
npm run benchmark:frontend

# åªè¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
npm run benchmark:e2e
```

### 4. å‘½ä»¤è¡Œé€‰é¡¹

```bash
# å®Œæ•´å‘½ä»¤è¡Œä½¿ç”¨
npx tsx run-benchmarks.ts [é€‰é¡¹]

# é€‰é¡¹è¯´æ˜
--backend    # åªè¿è¡Œåç«¯æµ‹è¯•
--frontend   # åªè¿è¡Œå‰ç«¯æµ‹è¯•
--e2e        # åªè¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•
--all        # è¿è¡Œæ‰€æœ‰æµ‹è¯• (é»˜è®¤)
--quick      # å¿«é€Ÿæµ‹è¯•æ¨¡å¼
--output DIR # æŒ‡å®šè¾“å‡ºç›®å½•

# ç¤ºä¾‹
npx tsx run-benchmarks.ts --backend --quick
npx tsx run-benchmarks.ts --all --output ./my-results
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æˆåŠŸæ ‡å‡†

#### åç«¯

- **ååé‡**: ä½å¹¶å‘ â‰¥50 RPS, é«˜å¹¶å‘ â‰¥20 RPS
- **è§„åˆ™å¼•æ“**: å•æ¡è§„åˆ™ <1ms, å¤šæ¡è§„åˆ™ <2ms, ååé‡ >100k req/s
- **æ•°æ®åº“**: å•æ¡å†™å…¥ <50ms, æ‰¹é‡å†™å…¥ <20ms/æ¡
- **SSE**: è¿æ¥å»ºç«‹ <100ms, äº‹ä»¶å»¶è¿Ÿ <50ms, 100% ç¨³å®šæ€§
- **èµ„æº**: å†…å­˜å¢é•¿ <50MB, æ— æ³„æ¼ (<0.1 MB/min)

#### å‰ç«¯

- **ç»„ä»¶æ¸²æŸ“**: ç®€å•ç»„ä»¶ <5ms, åˆ—è¡¨(100é¡¹) <50ms
- **è™šæ‹Ÿæ»šåŠ¨**: 10kæ•°æ®åˆå§‹ <100ms, æ»šåŠ¨ <300ms
- **çŠ¶æ€ç®¡ç†**: ç®€å•æ›´æ–° <5ms, æ‰¹é‡æ›´æ–° <100ms
- **å†…å­˜**: æ— æ³„æ¼ (<0.1 MB/min), ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ <10ms

#### ç«¯åˆ°ç«¯

- **å®Œæ•´æµç¨‹**: å¹³å‡ <100ms, P95 <200ms
- **æˆåŠŸç‡**: >95%
- **èµ„æº**: å†…å­˜æ³„æ¼ <0.5 MB/min

## ğŸ“ è¾“å‡ºç»“æœ

æµ‹è¯•å®Œæˆåä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š

```
benchmark/results-{timestamp}/
â”œâ”€â”€ benchmark-data.json          # å®Œæ•´æµ‹è¯•æ•°æ®
â”œâ”€â”€ comprehensive-report.md      # ç»¼åˆåˆ†ææŠ¥å‘Š
â”œâ”€â”€ backend-summary.md          # åç«¯æµ‹è¯•æ€»ç»“
â”œâ”€â”€ frontend-summary.md         # å‰ç«¯æµ‹è¯•æ€»ç»“
â””â”€â”€ e2e-summary.md              # ç«¯åˆ°ç«¯æµ‹è¯•æ€»ç»“
```

## ğŸ¯ æµ‹è¯•åœºæ™¯è¯¦è§£

### åç«¯æµ‹è¯•åœºæ™¯

#### 1. ååé‡æµ‹è¯•

```typescript
// æµ‹è¯•ä¸åŒå¹¶å‘ä¸‹çš„æ€§èƒ½
10 è¿æ¥ Ã— 1000 è¯·æ±‚  â†’  è¯„ä¼°ä½å¹¶å‘æ€§èƒ½
50 è¿æ¥ Ã— 1000 è¯·æ±‚  â†’  è¯„ä¼°ä¸­ç­‰å¹¶å‘æ€§èƒ½
100 è¿æ¥ Ã— 1000 è¯·æ±‚ â†’  è¯„ä¼°é«˜å¹¶å‘æ€§èƒ½
500 è¿æ¥ Ã— 1000 è¯·æ±‚ â†’  è¯„ä¼°æé™å¹¶å‘æ€§èƒ½
```

#### 2. è§„åˆ™å¼•æ“æµ‹è¯•

- **å•æ¡è§„åˆ™**: æµ‹è¯•åŸºç¡€è§„åˆ™åº”ç”¨æ€§èƒ½
- **å¤šæ¡è§„åˆ™**: æµ‹è¯• 3-5 æ¡è§„åˆ™ç»„åˆæ€§èƒ½
- **è§„åˆ™ç±»å‹**: å¯¹æ¯” append/replace/delete/insert æ€§èƒ½
- **ååé‡**: æŒç»­ 5 ç§’çš„è§„åˆ™åº”ç”¨ååé‡

#### 3. æ•°æ®åº“æµ‹è¯•

- **å•æ¡å†™å…¥**: 100 æ¬¡å•æ¡è®°å½•å†™å…¥
- **æ‰¹é‡å†™å…¥**: 10/100/1000 æ¡æ‰¹é‡å†™å…¥
- **æŸ¥è¯¢æ€§èƒ½**: å…¨è¡¨æ‰«æã€åˆ†é¡µã€ç­›é€‰ã€æœç´¢
- **å¹¶å‘å†™å…¥**: 10 å¹¶å‘ Ã— 50 è¯·æ±‚

#### 4. SSE æµ‹è¯•

- **è¿æ¥æ—¶é—´**: 20 æ¬¡è¿æ¥å»ºç«‹æ—¶é—´
- **å¹¶å‘ä¸Šé™**: é€æ­¥å¢åŠ åˆ° 100 è¿æ¥
- **äº‹ä»¶å»¶è¿Ÿ**: 50 ä¸ªäº‹ä»¶çš„æ¨é€å»¶è¿Ÿ
- **é‡è¿æ—¶é—´**: æ–­çº¿åé‡æ–°è¿æ¥æ—¶é—´

### å‰ç«¯æµ‹è¯•åœºæ™¯

#### 1. æ¸²æŸ“æ€§èƒ½

- **ç®€å•ç»„ä»¶**: 100 æ¬¡æŒ‚è½½/å¸è½½
- **åˆ—è¡¨æ¸²æŸ“**: 100/1000 é¡¹åˆ—è¡¨æ¸²æŸ“
- **ç»„ä»¶æ›´æ–°**: 50 æ¬¡çŠ¶æ€æ›´æ–°
- **æ‰¹é‡æ›´æ–°**: 50â†’100 é¡¹æ·»åŠ 

#### 2. è™šæ‹Ÿæ»šåŠ¨

- **åˆå§‹æ¸²æŸ“**: 1000/10000 é¡¹æ•°æ®ï¼Œåªæ¸²æŸ“ 50 å¯è§é¡¹
- **æ»šåŠ¨æ€§èƒ½**: 20 æ¬¡æ»šåŠ¨æ“ä½œ
- **åŠ¨æ€é«˜åº¦**: æ ¹æ®å†…å®¹é•¿åº¦è®¡ç®—é«˜åº¦
- **å†…å­˜å ç”¨**: 10000 é¡¹æ•°æ®çš„å†…å­˜ä½¿ç”¨

#### 3. çŠ¶æ€ç®¡ç†

- **ç®€å•æ›´æ–°**: 100 æ¬¡ Zustand çŠ¶æ€æ›´æ–°
- **æ‰¹é‡æ›´æ–°**: æ·»åŠ  10 é¡¹ + æ›´æ–° 5 æ¬¡
- **è®¢é˜…æ•ˆç‡**: 10 è®¢é˜…è€… Ã— 50 æ›´æ–°
- **å¤æ‚æ›´æ–°**: åµŒå¥—å¯¹è±¡æ›´æ–°

#### 4. å†…å­˜ç®¡ç†

- **ç”Ÿå‘½å‘¨æœŸ**: 1000 æ¬¡ç»„ä»¶æŒ‚è½½/å¸è½½
- **é•¿æ—¶é—´è¿è¡Œ**: 2 åˆ†é’ŸæŒç»­æ“ä½œ
- **å¤§æ•°æ®é›†**: 100/1000/5000/10000 é¡¹å†…å­˜å ç”¨
- **æ³„æ¼å‹åŠ›**: 5000 æ¬¡æ³„æ¼æ“ä½œæµ‹è¯•

### ç«¯åˆ°ç«¯æµ‹è¯•åœºæ™¯

#### 1. å®Œæ•´æµç¨‹

- **100 æ¬¡è¯·æ±‚**: æµ‹è¯•å®Œæ•´è¯·æ±‚é“¾è·¯
- **æˆåŠŸç‡**: ç»Ÿè®¡æˆåŠŸ/å¤±è´¥æ¯”ä¾‹
- **å»¶è¿Ÿåˆ†å¸ƒ**: åˆ†æå»¶è¿Ÿåˆ†å¸ƒæƒ…å†µ

#### 2. è§„åˆ™åº”ç”¨

- **200 æ¬¡è¿­ä»£**: æµ‹è¯•ä¸åŒè§„åˆ™æ•°é‡
- **1/3/5 æ¡è§„åˆ™**: å¯¹æ¯”è§„åˆ™æ•°é‡å¯¹æ€§èƒ½å½±å“

#### 3. UI æ›´æ–°

- **50 æ¬¡æ›´æ–°**: æ¨¡æ‹Ÿ UI å®Œæ•´æ›´æ–°æµç¨‹

#### 4. å»¶è¿Ÿåˆ†å¸ƒ

- **500 æ¬¡è¯·æ±‚**: æ”¶é›†å¤§é‡æ•°æ®ç”¨äºåˆ†å¸ƒåˆ†æ

#### 5. é«˜å¹¶å‘

- **30 å¹¶å‘ Ã— 20 è¯·æ±‚**: æµ‹è¯•é«˜å¹¶å‘ç«¯åˆ°ç«¯æ€§èƒ½

#### 6. èµ„æºç›‘æ§

- **30 ç§’æŒç»­æµ‹è¯•**: ç›‘æ§å†…å­˜å’Œ CPU ä½¿ç”¨

## ğŸ”§ è‡ªå®šä¹‰æµ‹è¯•

### ä¿®æ”¹æµ‹è¯•å‚æ•°

ç¼–è¾‘ `benchmark/performance-benchmark-framework.ts` ä¸­çš„é…ç½®ï¼š

```typescript
export const PerformanceBaselines = {
  backend: {
    throughput: {
      lowConcurrency: { rps: 50, successRate: 95 },
      // ... ä¿®æ”¹åŸºçº¿æ ‡å‡†
    },
  },
};
```

### æ·»åŠ æ–°æµ‹è¯•åœºæ™¯

```typescript
// åœ¨ç›¸åº”çš„æµ‹è¯•ç±»ä¸­æ·»åŠ æ–°æ–¹æ³•
async function newTestScenario() {
  const benchmark = new BackendBenchmarkSuite();
  const result = await benchmark.throughput.testConcurrency(200, 500);
  return result;
}
```

### è°ƒæ•´æˆåŠŸæ ‡å‡†

```typescript
const customCriteria: SuccessCriteria = {
  latency: {
    maxAvgLatency: 20,      // æ›´ä¸¥æ ¼çš„æ ‡å‡†
    maxP95Latency: 50,
    maxP99Latency: 100,
  },
  // ... å…¶ä»–æ ‡å‡†
};
`` =ã€‚
çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€çŠ¶æ€ã€‚
ã€‚
ã€‚
ã€‚
ã€‚
ã€‚
ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚
ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚
ã€‚

ã€‚
ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚
ã€‚

ã€‚
ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

ã€‚

çš„ã€‚
çš„ã€‚
ã€‚
ã€‚

ã€‚
çš„ã€‚
ã€‚
ã€‚

ã€‚
ã€‚
##ã€‚
ã€‚
ã€‚
ã€‚
ã€‚
ã€‚


ã€‚
ã€‚
ã€‚

 //
ã€‚

ã€‚
ã€‚

 //
 //
 // //
-
ã€‚


 benchmark    ï¿½  ï¿½enchmark        // //        {
      // //   //               //        {
   {
       benchmark           ï¿½  //   //   //   //     //                     // benchmark      // ** 1. [completed] åˆ†æé¡¹ç›®ç»“æ„ï¼Œäº†è§£ç°æœ‰æ¶æ„å’Œç»„ä»¶
2. [completed] è®¾è®¡æ€§èƒ½åŸºå‡†æµ‹è¯•æ¡†æ¶å’ŒæŒ‡æ ‡ä½“ç³»
3. [completed] å®ç°åç«¯åŸºå‡†æµ‹è¯•ï¼ˆååé‡ã€è§„åˆ™å¼•æ“ã€æ•°æ®åº“ã€SSEï¼‰
4. [completed] å®ç°å‰ç«¯åŸºå‡†æµ‹è¯•ï¼ˆæ¸²æŸ“ã€çŠ¶æ€ç®¡ç†ã€å†…å­˜ï¼‰
5. [completed] å®ç°ç«¯åˆ°ç«¯åŸºå‡†æµ‹è¯•
6. [in_progress] è¿è¡Œæ‰€æœ‰åŸºå‡†æµ‹è¯•å¹¶æ”¶é›†æ•°æ®
7. [pending] ç”Ÿæˆæ€§èƒ½åˆ†ææŠ¥å‘Šå’Œä¼˜åŒ–å»ºè®®]
```
