{
  "listen": {
    "host": "127.0.0.1",
    "port": 7070
  },
  "api": {
    "host": "127.0.0.1",
    "port": 7071
  },
  "upstreams": {
    "anthropic": "https://api.anthropic.com",
    "openai": "https://api.openai.com",
    "gemini": "https://generativelanguage.googleapis.com"
  },
  "rules": [
    {
      "id": "example-rule-001",
      "description": "在Claude系统提示后追加自定义规则",
      "when": {
        "client": "claude",
        "field": "system"
      },
      "ops": [
        {
          "type": "append",
          "text": "\n\n## Custom Rules\n- Be concise\n- Use markdown\n- Focus on key points"
        }
      ],
      "enabled": true
    },
    {
      "id": "example-rule-002",
      "description": "替换Codex指令中的特定文本",
      "when": {
        "client": "codex",
        "field": "instructions",
        "method": "POST"
      },
      "ops": [
        {
          "type": "replace",
          "match": "old text",
          "replacement": "new text"
        }
      ],
      "enabled": false
    },
    {
      "id": "example-rule-003",
      "description": "使用正则删除Gemini系统提示中的敏感词",
      "when": {
        "client": "gemini",
        "field": "system"
      },
      "ops": [
        {
          "type": "delete",
          "regex": "password|secret",
          "flags": "gi"
        }
      ],
      "enabled": true
    }
  ],
  "storage": {
    "maxHistory": 100,
    "autoCleanup": true,
    "cleanupInterval": 1
  },
  "debug": false
}
